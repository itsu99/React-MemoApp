# Directory structure
docker-react/
├── app/                    # Reactアプリケーションが作成されるディレクトリ
│   ├── public/
│   ├── src/
│   ├── package.json
│   ├── package-lock.json
│   ├── .gitignore
│   └── README.md
├── docker/
│   └── Dockerfile          # Dockerfileを配置するディレクトリ
└── docker-compose.yml      # Docker Composeファイル

# Dockerイメージをビルド
cd docker-react/
docker-compose build

# Dockerコンテナ内でReactプロジェクトを作成
docker-compose run --rm app sh -c 'npm create vite@latest app -- --template react-ts'

# Dockerコンテナ起動時に開発用サーバーを起動するようにdocker-compose.ymlに追加
+   command: sh -c 'cd app && npm run start'

# vite.config.tsを下記に変更
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    host: true,       // 0.0.0.0 と同等。コンテナ外からアクセス可能にする
    watch: {
      usePolling: true, // マウントボリュームでも変更を確実に検知
      interval: 100     // ポーリング間隔（ms）
    }
  }
})

# Dockerコンテナを起動
docker-compose up -d
